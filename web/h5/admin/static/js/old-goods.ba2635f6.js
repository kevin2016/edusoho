(window.webpackJsonp=window.webpackJsonp||[]).push([["old-goods"],{"2a79":function(t,e,o){"use strict";o.r(e),o("8e6e"),o("ac6a"),o("456d"),o("e7e5");var s=o("d399"),i=o("bd86"),n=o("92d0"),a=o("e90f"),c=o("51a9"),r=o("e57e"),l=o("d218"),d=o("b576"),u=o("84e1"),f=o("228a"),h=o("3ce7"),v=o("2f62");function p(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,s)}return o}function m(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?p(Object(o),!0).forEach((function(e){Object(i.a)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var g={data:function(){return{details:{},currentPlan:{},active:0,timer:null,flag:!0,backToTopShow:!1,componentsInfo:{}}},components:{Discount:n.a,Specs:c.a,Detail:a.a,Teacher:r.a,Recommend:l.a,Buy:d.a,BackToTop:u.a,AfterjoinDirectory:f.a},computed:{summary:function(){return this.details.description?this.details.description:"暂无简介~"}},methods:m(m({},Object(v.c)("course",["getCourseLessons"])),{},{getGoodsCourse:function(){var t=this;h.a.getGoodsCourse({query:{id:this.$route.params.id}}).then((function(e){var o=e;for(var s in o.specs)t.$set(o.specs[s],"active",!1),t.$set(o.specs[s],"id",s),s==t.$route.params.id&&(t.$set(o.specs[s],"active",!0),t.currentPlan=o.specs[s]);t.details=o})).catch((function(t){s.a.fail(t.message)})),this.getCourseLessons({courseId:this.$route.params.id}).then((function(t){})),this.getGoodsCourseComponents()},getGoodsCourseComponents:function(){var t=this;h.a.getGoodsCourseComponents({query:{id:this.$route.params.id},params:{componentTypes:["teachers","reviews","recommendGoods"]}}).then((function(e){t.componentsInfo=e}))},changePlan:function(t){var e=this.details;for(var o in e.specs)this.$set(e.specs[o],"active",!1),o==t&&(this.$set(e.specs[o],"active",!0),this.currentPlan=e.specs[o])},onActive:function(t,e){var o=this;clearTimeout(this.timer),this.timer=null,this.flag=!1,this.active=t;var s=document.getElementById(e).offsetTop,i=document.getElementById("goods-info__nav").offsetHeight;document.documentElement.scrollTop=s-i,this.timer=setTimeout((function(){o.flag=!0}),500)},handleScroll:function(){var t=this,e=document.documentElement.scrollTop||document.body.scrollTop;e>600&&!this.backToTopShow&&(this.backToTopShow=!0),e<600&&this.backToTopShow&&(this.backToTopShow=!1),this.flag&&(clearTimeout(this.timer),this.timer=null,this.timer=setTimeout((function(){t.calcScrollTop(e)}),200))},calcScrollTop:function(t){for(var e=document.getElementById("goods-info__nav").offsetHeight,o=document.querySelectorAll(".js-scroll-top"),s=o.length-1;s>=0;s--){if(t>=o[s].offsetTop-e)return void(this.active!=s&&(this.active=s));this.active=0}}}),created:function(){this.getGoodsCourse()},watch:{$route:"getGoodsCourse"},mounted:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},_=o("0c7c"),b=Object(_.a)(g,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"goods"},[o("div",{staticClass:"goods-detail"},[o("div",{staticClass:"goods-detail__banner"},[o("img",{attrs:{src:t.details.image}})]),o("discount",{attrs:{details:t.details}}),o("detail",{attrs:{details:t.details,currentPlan:t.currentPlan}}),o("specs",{attrs:{details:t.details,currentPlan:t.currentPlan},on:{changePlan:t.changePlan}})],1),o("div",{staticClass:"goods-info"},[o("ul",{staticClass:"goods-info__nav",attrs:{id:"goods-info__nav"}},[o("li",{on:{click:function(e){return t.onActive(0,"introduction")}}},[o("a",{class:0==t.active?"active":"",attrs:{href:"javascript:;"}},[t._v("简介")])]),o("li",{on:{click:function(e){return t.onActive(1,"teacher")}}},[o("a",{class:1==t.active?"active":"",attrs:{href:"javascript:;"}},[t._v("教师")])]),o("li",{on:{click:function(e){return t.onActive(2,"catalog")}}},[o("a",{class:2==t.active?"active":"",attrs:{href:"javascript:;"}},[t._v("目录")])]),o("li",{on:{click:function(e){return t.onActive(3,"evaluate")}}},[o("a",{class:3==t.active?"active":"",attrs:{href:"javascript:;"}},[t._v("评价")])])]),o("section",{staticClass:"js-scroll-top goods-info__item",attrs:{id:"introduction"}},[o("div",{staticClass:"goods-info__title"},[t._v("课程简介")]),o("div",{staticClass:"info-introduction",domProps:{innerHTML:t._s(t.summary)}})]),o("section",{staticClass:"js-scroll-top goods-info__item",attrs:{id:"teacher"}},[o("div",{staticClass:"goods-info__title"},[t._v("教师风采")]),o("teacher",{attrs:{teachers:t.componentsInfo.teachers}})],1),o("section",{staticClass:"js-scroll-top goods-info__item",attrs:{id:"catalog"}},[o("div",{staticClass:"goods-info__title"},[t._v("课程目录")]),o("afterjoin-directory")],1),t._m(0),o("section",{staticClass:"goods-info__item"},[o("Recommend",{attrs:{recommendGoods:t.componentsInfo.recommendGoods}},[o("span",{attrs:{slot:"title"},slot:"title"},[t._v("猜你想学")])])],1),o("buy"),o("back-to-top",{directives:[{name:"show",rawName:"v-show",value:t.backToTopShow,expression:"backToTopShow"}]})],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"js-scroll-top goods-info__item",attrs:{id:"evaluate"}},[e("div",{staticClass:"goods-info__title"},[this._v("课程评价")])])}],!1,null,null,null);e.default=b.exports},"3acd":function(t,e,o){"use strict";o.r(e),o("8e6e"),o("ac6a"),o("456d"),o("e7e5");var s=o("d399"),i=o("bd86"),n=o("92d0"),a=o("e90f"),c=o("51a9"),r=o("e57e"),l=o("d218"),d=o("b576"),u=o("84e1"),f=o("9498"),h=o("3ce7"),v=o("2f62");function p(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,s)}return o}function m(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?p(Object(o),!0).forEach((function(e){Object(i.a)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var g={data:function(){return{details:{},currentPlan:{},active:0,timer:null,flag:!0,backToTopShow:!1,componentsInfo:{}}},components:{Discount:n.a,Specs:c.a,Detail:a.a,Teacher:r.a,Recommend:l.a,Buy:d.a,BackToTop:u.a,ClassroomCourses:f.a},computed:{summary:function(){return this.details.description?this.details.description:"暂无简介~"}},methods:m(m({},Object(v.c)("course",["getCourseLessons"])),{},{getGoodsCourse:function(){var t=this;h.a.getGoodsCourse({query:{id:this.$route.params.id}}).then((function(e){var o=e;for(var s in o.specs)t.$set(o.specs[s],"active",!1),t.$set(o.specs[s],"id",s),s==t.$route.params.id&&(t.$set(o.specs[s],"active",!0),t.currentPlan=o.specs[s]);t.details=o})).catch((function(t){s.a.fail(t.message)})),this.getCourseLessons({courseId:this.$route.params.id}).then((function(t){})),this.getGoodsCourseComponents()},getGoodsCourseComponents:function(){var t=this;h.a.getGoodsCourseComponents({query:{id:this.$route.params.id},params:{componentTypes:["teachers","reviews","recommendGoods"]}}).then((function(e){t.componentsInfo=e}))},changePlan:function(t){var e=this.details;for(var o in e.specs)this.$set(e.specs[o],"active",!1),o==t&&(this.$set(e.specs[o],"active",!0),this.currentPlan=e.specs[o])},onActive:function(t,e){var o=this;clearTimeout(this.timer),this.timer=null,this.flag=!1,this.active=t;var s=document.getElementById(e).offsetTop,i=document.getElementById("goods-info__nav").offsetHeight;document.documentElement.scrollTop=s-i,this.timer=setTimeout((function(){o.flag=!0}),500)},handleScroll:function(){var t=this,e=document.documentElement.scrollTop||document.body.scrollTop;e>600&&!this.backToTopShow&&(this.backToTopShow=!0),e<600&&this.backToTopShow&&(this.backToTopShow=!1),this.flag&&(clearTimeout(this.timer),this.timer=null,this.timer=setTimeout((function(){t.calcScrollTop(e)}),200))},calcScrollTop:function(t){for(var e=document.getElementById("goods-info__nav").offsetHeight,o=document.querySelectorAll(".js-scroll-top"),s=o.length-1;s>=0;s--){if(t>=o[s].offsetTop-e)return void(this.active!=s&&(this.active=s));this.active=0}}}),created:function(){this.getGoodsCourse()},watch:{$route:"getGoodsCourse"},mounted:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},_=o("0c7c"),b=Object(_.a)(g,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"goods"},[o("div",{staticClass:"goods-detail"},[o("div",{staticClass:"goods-detail__banner"},[o("img",{attrs:{src:t.details.image}})]),o("discount",{attrs:{details:t.details}}),o("detail",{attrs:{details:t.details,currentPlan:t.currentPlan}}),o("specs",{attrs:{details:t.details,currentPlan:t.currentPlan},on:{changePlan:t.changePlan}})],1),o("div",{staticClass:"goods-info"},[o("ul",{staticClass:"goods-info__nav",attrs:{id:"goods-info__nav"}},[o("li",{on:{click:function(e){return t.onActive(0,"introduction")}}},[o("a",{class:0==t.active?"active":"",attrs:{href:"javascript:;"}},[t._v("简介")])]),o("li",{on:{click:function(e){return t.onActive(1,"teacher")}}},[o("a",{class:1==t.active?"active":"",attrs:{href:"javascript:;"}},[t._v("教师")])]),o("li",{on:{click:function(e){return t.onActive(2,"catalog")}}},[o("a",{class:2==t.active?"active":"",attrs:{href:"javascript:;"}},[t._v("目录")])]),o("li",{on:{click:function(e){return t.onActive(3,"evaluate")}}},[o("a",{class:3==t.active?"active":"",attrs:{href:"javascript:;"}},[t._v("评价")])])]),o("section",{staticClass:"js-scroll-top goods-info__item",attrs:{id:"introduction"}},[o("div",{staticClass:"goods-info__title"},[t._v("课程简介")]),o("div",{staticClass:"info-introduction",domProps:{innerHTML:t._s(t.summary)}})]),o("section",{staticClass:"js-scroll-top goods-info__item",attrs:{id:"teacher"}},[o("div",{staticClass:"goods-info__title"},[t._v("教师风采")]),o("teacher",{attrs:{teachers:t.componentsInfo.teachers}})],1),o("section",{staticClass:"js-scroll-top goods-info__item",attrs:{id:"catalog"}},[o("div",{staticClass:"goods-info__title"},[t._v("课程目录")]),o("classroom-courses")],1),t._m(0),o("section",{staticClass:"goods-info__item"},[o("Recommend",{attrs:{recommendGoods:t.componentsInfo.recommendGoods}},[o("span",{attrs:{slot:"title"},slot:"title"},[t._v("猜你想学")])])],1),o("buy"),o("back-to-top",{directives:[{name:"show",rawName:"v-show",value:t.backToTopShow,expression:"backToTopShow"}]})],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"js-scroll-top goods-info__item",attrs:{id:"evaluate"}},[e("div",{staticClass:"goods-info__title"},[this._v("课程评价")])])}],!1,null,null,null);e.default=b.exports}}]);