(window.webpackJsonp=window.webpackJsonp||[]).push([["classroom"],{4127:function(e,t,i){"use strict";var s=i("d233"),r=i("b313"),a=Object.prototype.hasOwnProperty,n={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},o=Array.isArray,c=Array.prototype.push,l=function(e,t){c.apply(e,o(t)?t:[t])},u=Date.prototype.toISOString,d={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:s.encode,encodeValuesOnly:!1,formatter:r.formatters[r.default],indices:!1,serializeDate:function(e){return u.call(e)},skipNulls:!1,strictNullHandling:!1},p=function e(t,i,r,a,n,c,u,p,f,h,m,v,g){var b=t;if("function"==typeof u?b=u(i,b):b instanceof Date?b=h(b):"comma"===r&&o(b)&&(b=b.join(",")),null===b){if(a)return c&&!v?c(i,d.encoder,g):i;b=""}if("string"==typeof b||"number"==typeof b||"boolean"==typeof b||s.isBuffer(b))return c?[m(v?i:c(i,d.encoder,g))+"="+m(c(b,d.encoder,g))]:[m(i)+"="+m(String(b))];var y,w=[];if(void 0===b)return w;if(o(u))y=u;else{var _=Object.keys(b);y=p?_.sort(p):_}for(var C=0;C<y.length;++C){var O=y[C];n&&null===b[O]||(o(b)?l(w,e(b[O],"function"==typeof r?r(i,O):i,r,a,n,c,u,p,f,h,m,v,g)):l(w,e(b[O],i+(f?"."+O:"["+O+"]"),r,a,n,c,u,p,f,h,m,v,g)))}return w};e.exports=function(e,t){var i,s=e,c=function(e){if(!e)return d;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||d.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=r.default;if(void 0!==e.format){if(!a.call(r.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var s=r.formatters[i],n=d.filter;return("function"==typeof e.filter||o(e.filter))&&(n=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:d.addQueryPrefix,allowDots:void 0===e.allowDots?d.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:d.charsetSentinel,delimiter:void 0===e.delimiter?d.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:d.encode,encoder:"function"==typeof e.encoder?e.encoder:d.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:d.encodeValuesOnly,filter:n,formatter:s,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:d.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:d.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:d.strictNullHandling}}(t);"function"==typeof c.filter?s=(0,c.filter)("",s):o(c.filter)&&(i=c.filter);var u,f=[];if("object"!=typeof s||null===s)return"";u=t&&t.arrayFormat in n?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var h=n[u];i||(i=Object.keys(s)),c.sort&&i.sort(c.sort);for(var m=0;m<i.length;++m){var v=i[m];c.skipNulls&&null===s[v]||l(f,p(s[v],v,h,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var g=f.join(c.delimiter),b=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),g.length>0?b+g:""}},4328:function(e,t,i){"use strict";var s=i("4127"),r=i("9e6a"),a=i("b313");e.exports={formats:a,parse:r,stringify:s}},"504c":function(e,t,i){var s=i("9e1e"),r=i("0d58"),a=i("6821"),n=i("52a7").f;e.exports=function(e){return function(t){for(var i,o=a(t),c=r(o),l=c.length,u=0,d=[];l>u;)i=c[u++],s&&!n.call(o,i)||d.push(e?[i,o[i]]:o[i]);return d}}},"639e":function(e,t,i){"use strict";i("c5f6");var s={name:"ECoupon",mixins:[i("8813").a],props:{showButton:{type:Boolean,default:!0},showSelecet:{type:Boolean,default:!1},coupon:{type:Object,default:function(){return{}}},index:{type:Number,default:-1},active:{type:Number,default:-1}},data:function(){return{}},created:function(){},methods:{onSelect:function(){this.showSelecet&&this.$emit("chooseItem",{index:this.index,itemData:this.coupon})},couponHandle:function(){this.$emit("couponHandle",this.coupon)}}},r=i("0c7c"),a=Object(r.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"coupon-container e-coupon",on:{click:e.onSelect}},[i("div",{staticClass:"e-coupon__container clearfix e-coupon-single"},[i("div",{key:e.index,staticClass:"e-coupon__body"},[i("div",{staticClass:"e-coupon__header clearfix"},[i("span",{staticClass:"e-coupon__price",domProps:{innerHTML:e._s(e.priceHtml(e.coupon))}}),i("div",{staticClass:"e-coupon__name"},[i("div",{staticClass:"text-overflow text-14 coupon-name"},[e._v("\n            "+e._s(e.coupon.name||e.$t("e.coupon"))+"\n          ")]),e.coupon.deadlineMode&&"time"!==e.coupon.deadlineMode?e._e():i("span",{staticClass:"text-10"},[e._v(e._s(e.timeExpire(e.coupon.createdTime,e.coupon.deadline)))]),"day"!==e.coupon.deadlineMode||e.coupon.currentUserCoupon?e._e():i("span",{staticClass:"text-10"},[e._v(e._s(e.$t("e.validWithinDayAfterReceiving",{number:e.coupon.fixedDay})))]),"day"===e.coupon.deadlineMode&&e.coupon.currentUserCoupon?i("span",{staticClass:"text-10"},[e._v(e._s(e.timeExpire(e.coupon.createdTime,e.coupon.currentUserCoupon.deadline)))]):e._e()]),e.coupon.currentUserCoupon?i("div",{staticClass:"stamp"}):e._e(),e.showSelecet?i("div",{staticClass:"e-coupon__select-circle"},[i("i",{staticClass:"select-icon",class:e.index===e.active?"h5-icon h5-icon-check":""})]):e._e(),e.showButton&&!e.coupon.currentUserCoupon?i("span",{staticClass:"coupon-button",on:{click:e.couponHandle}},[e._v(e._s(e.$t("e.getCoupons")))]):e._e()]),i("div",{staticClass:"e-coupon__middle"}),i("div",{staticClass:"e-coupon__bottom text-overflow"},[e._v("\n        "+e._s(e.$t("e.availableRange"))+"："+e._s(e.scopeFilter(e.coupon))+"\n      ")])])])])}),[],!1,null,null,null);t.a=a.exports},8615:function(e,t,i){var s=i("5ca1"),r=i("504c")(!1);s(s.S,"Object",{values:function(e){return r(e)}})},"86ee":function(e,t,i){"use strict";var s={name:"MoreMask",props:{maxHeight:{default:288},disabled:{default:!1},forceShow:{type:Boolean,default:!1},text:{type:Object,default:function(){return{content:"",lineHeight:17,paddingTop:100,align:"center"}}}},data:function(){return{realHeight:0,intervalTime:5e3,intervalId:void 0}},computed:{exccedHeight:function(){return this.realHeight>this.maxHeight||this.forceShow},heightStyle:function(){return{maxHeight:!this.exccedHeight||this.disabled||this.forceShow?"none":"".concat(this.maxHeight,"px"),paddingBottom:this.forceShow||this.exccedHeight&&!this.disabled?"25px":"0"}},textStyle:function(){return{paddingTop:"".concat(this.text.paddingTop,"px"),lineHeight:"".concat(this.text.lineHeight,"px"),textAlign:"".concat(this.text.align)}}},mounted:function(){var e=this;this.intervalId=setInterval((function(){e.intervalTime-=500,e.intervalTime<0?clearInterval(e.intervalId):e.realHeight=e.$el.getBoundingClientRect().height}),500)},methods:{maskLoadMore:function(){this.$emit("maskLoadMore")}}},r=i("0c7c"),a=Object(r.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"more-mask"},[i("div",{staticClass:"more-mask__body",style:e.heightStyle},[e._t("default")],2),e.disabled?e._e():i("div",{directives:[{name:"show",rawName:"v-show",value:e.exccedHeight,expression:"exccedHeight"}],staticClass:"more-mask__footer",style:e.textStyle,on:{touchstart:function(t){return t.preventDefault(),e.maskLoadMore(t)}}},[e._v("\n    "+e._s(e.text.content||"点击查看更多")+"\n  ")])])}),[],!1,null,null,null);t.a=a.exports},8807:function(e,t,i){"use strict";i("a481"),i("ac6a"),i("456d"),i("7f7f"),i("c5f6"),i("8e6e");var s=i("bd86"),r=i("2f62");function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){Object(s.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var o={props:{type:{type:String,default:"price"},course:{type:Object,default:function(){return{}}},order:{type:Object,default:function(){return{}}}},data:function(){return{isFree:0==this.course.price}},computed:n(n({},Object(r.e)(["courseSettings"])),{},{rate:function(){return parseInt(this.course.publishedTaskNum)?parseInt(this.course.progress.percent):0},showStudent:function(){return!this.courseSettings||Number(this.courseSettings.show_student_num_enabled)}}),filters:{numFilter:function(e){return e?parseFloat(e).toFixed(2):""}},methods:{goToPay:function(){this.$router.replace({path:"/pay",query:{id:this.order.id,source:"order",sn:this.order.sn,targetId:this.order.targetId,targetType:this.order.targetType}})},displayPrice:function(e){var t,i=this.type;if("order"===i){var s=e.currency,r=e.coinAmount,a=e.coinName,n=e.amount;return"coin"===s?(t=r?(r/100).toFixed(2):"",t="".concat(t," ").concat(a)):"RMB"===s&&(t=n?(n/100).toFixed(2):"",t="¥ ".concat(t)),t}if("confirmOrder"===i){var o=e.priceType,c=e.coinPayAmount,l=e.coinName,u=e.totalPrice;return"Coin"===o?(t=c?parseFloat(c).toFixed(2):"",t="".concat(t," ").concat(l)):"RMB"===o&&(t="¥ ".concat(u)),t}}}},c=i("0c7c"),l={components:{switchBox:Object(c.a)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"e-course-switch-box"},["price"===e.type?i("div",{staticClass:"switch-box"},[i("span",{staticClass:"text-12"},[e.isFree?i("p",{staticClass:"free"},[e._v(e._s(e.$t("e.free")))]):e._e(),e.isFree?e._e():i("p",{staticClass:"price"},[e._v("¥ "+e._s(e.course.price))])]),i("span",{staticClass:"text-12"},[e.showStudent?i("p",[e._v(e._s(e.$t("e.personStudying",{number:e.course.studentNum})))]):e._e()])]):e._e(),"order"===e.type?i("div",{staticClass:"switch-box"},[i("span",{staticClass:"text-12"},[e.isFree?i("p",{staticClass:"free"},[e._v(e._s(e.$t("e.free")))]):e._e(),e.isFree?e._e():i("p",{staticClass:"price"},[e._v("\n        "+e._s(e.displayPrice(e.order.priceConvert))+"\n      ")])]),i("span",{staticClass:"text-12"},["created"!==e.order.status&&"paying"!==e.order.status?i("p",{class:e.order.status},[e._v("\n        "+e._s(e._f("filterOrderStatus")(e.order.status))+"\n      ")]):e._e(),"created"===e.order.status||"paying"===e.order.status?i("span",{staticClass:"order-pay",on:{click:e.goToPay}},[e._v(e._s(e._f("filterOrderStatus")(e.order.status)))]):e._e()])]):e._e(),"confirmOrder"===e.type?i("div",{staticClass:"switch-box"},[i("span",{staticClass:"text-12"},[i("p",{staticClass:"price"},[e._v(e._s(e.displayPrice(e.order)))])])]):e._e(),"rank"===e.type?i("div",{staticClass:"rank-box"},[i("div",{staticClass:"progress round-conner"},[i("div",{staticClass:"curRate round-conner",style:{width:e.rate+"%"}})]),i("span",[e._v(e._s(this.rate)+"%")])]):e._e()])}),[],!1,null,null,null).exports},props:{course:{type:Object,default:function(){return{}}},order:{type:Object,default:function(){return{}}},type:{type:String,default:"price"},feedback:{type:Boolean,default:!0},typeList:{type:String,default:"course_list"},duration:{type:[Number,String],default:0}},data:function(){return{pathName:this.$route.name}},computed:{imgSrc:function(){if("classroom_list"===this.typeList)return this.course.cover.middle;var e=this.course.courseSet;return(e?e.cover.middle:this.order.cover.middle)||""},title:function(){return"classroom_list"===this.typeList?this.course.title:this.course.courseSetTitle||(this.course.courseSet?this.course.courseSet.title:"")||this.order.title},teachPlan:function(){return!!this.course.title&&this.course.title},imgClass:function(){return"vip"===this.typeList?"e-vip__img":"e-course__img"}},watch:{course:{handler:function(e){var t=e.courseSet;if("miniprogramSetting"===this.pathName&&t)for(var i=Object.keys(t.cover),s=0;s<i.length;s++)t.cover[i[s]]=t.cover[i[s]].replace(/^(\/\/)|(http:\/\/)/,"https://")},immediate:!0}},methods:{onClick:function(e){if(this.feedback&&"vip"!==this.typeList){var t="order"===this.type,i=this.course.id||this.order.targetId;"SPAN"!==e.target.tagName&&(t?"course"===this.typeList||"classroom"===this.typeList?this.$router.push({path:"/goods/".concat(this.order.goodsId,"/show"),query:{targetId:this.order.targetId,type:this.typeList+"_list"}}):location.href=this.order.targetUrl:"course"!==this.typeList&&("classroom_list"===this.typeList&&this.$router.push({path:"/classroom/".concat(i)}),"course_list"===this.typeList&&this.$router.push({path:"/course/".concat(i)})))}}}},u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"e-course"},[i("div",{staticClass:"clearfix",on:{click:e.onClick}},[i("div",{staticClass:"e-course__left pull-left"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imgSrc,expression:"imgSrc"}],class:e.imgClass})]),i("div",{staticClass:"e-course__right pull-left"},["confirmOrder"===e.type?i("div",{staticClass:"e-course__title course-confirm-title"},[e._v("\n        "+e._s(e.title)+"\n      ")]):i("div",[i("div",{staticClass:"e-course__title text-overflow"},[e._v(e._s(e.title))]),"classroom_list"===e.typeList?i("div",{staticClass:"e-course__count"},[e._v("\n          "+e._s(e.$t("e.totalOfTwoCourses",{number:e.course.courseNum}))+"\n        ")]):e._e(),"course_list"===e.typeList?i("div",{staticClass:"e-course__project text-overflow"},[e.teachPlan?i("span",[e._v(e._s(e.teachPlan))]):e._e()]):e._e()]),i("switchBox",{attrs:{type:e.type,course:e.course,order:e.order,"student-num":e.course.studentNum,"published-task-num":e.course.publishedTaskNum}})],1)])])}),[],!1,null,null,null);t.a=u.exports},8813:function(e,t,i){"use strict";i("28a5"),i("6b54"),i("c5f6");var s=i("0d25");t.a={methods:{timeExpire:function(e,t){return e?(e=Object(s.formatFullTime)(new Date(e)),t=Object(s.formatFullTime)(new Date(t)),"".concat(e," 至 ").concat(t)):(t=Object(s.formatFullTime)(new Date(t)),"有效期截止：".concat(t))},timeCalculation:function(e){var t=(new Date).setDate((new Date).getDate()+Number(e));return t=Object(s.formatFullTime)(new Date(t)),"有效期至：".concat(t)},priceHtml:function(e){var t=e.rate,i=e.type,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=parseInt(t,10),a=r.toString().length>3?"text-16 ml-5":"",n=Number(t).toFixed(2).split(".")[1];n=0===Number(n)?"":".".concat(n);var o="discount"===i?"折":"元";return s?'<span class="'.concat(a,'">').concat(r,'</span><span class="text-14">').concat(n+o,"</span>"):r+n+o},scopeFilter:function(e){var t=e.targetDetail,i=t.numType,s=t.product,r="";if("single"===i)switch(s){case"course":case"classroom":r="指定商品";break;case"vip":r="指定会员";break;default:r=""}else if("all"===i)switch(s){case"course":r=this.$t("coupon.allCourse");break;case"classroom":r=this.$t("coupon.allClass");break;case"all":r=this.$t("coupon.allGoods");break;case"vip":r=this.$t("coupon.allMember");break;default:r=""}else switch(s){case"course":case"classroom":r="部分商品";break;default:r=""}return r},handleClick:function(e){this.$emit("buttonClick",e)},receiveTimeExpire:function(e){return Object(s.formatchinaTime)(new Date(e))}}}},"8ab6":function(e,t,i){"use strict";i.r(t),i("8e6e"),i("ac6a"),i("456d"),i("e7e5");var s=i("d399"),r=i("bd86"),a=(i("e17f"),i("2241")),n=(i("7f7f"),i("a481"),i("96cf"),i("3b8d")),o={name:"Teacher",props:["teacherInfo","title","defaulValue"]},c=i("0c7c"),l=Object(c.a)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("e-panel",{attrs:{title:e.title,"defaul-value":e.defaulValue}},[e._l(e.teacherInfo,(function(t){return e.teacherInfo.length?[i("div",{staticClass:"teacher-content"},[i("img",{staticClass:"avatar-img",attrs:{src:t.avatar&&t.avatar.large}}),i("div",{staticClass:"teacher-cell"},[i("span",{staticClass:"dark font-family-PFM"},[e._v(e._s(t.nickname))]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"item.title"}],staticClass:"text-content"},[e._v(e._s(t.title))])])])]:e._e()}))],2)}),[],!1,null,null,null).exports,u=i("fd23"),d=i("bced"),p=i("3ce7"),f=i("4328"),h=i.n(f),m=i("2f62");function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}var g={components:{countDown:u.a,tagLink:d.a},props:{cover:{type:String,default:""},price:{type:String,default:""},classroomId:{type:String,default:0},seckillActivities:{type:Object,default:null}},data:function(){return{counting:!0,isEmpty:!1,tagData:{earnings:0,isShow:!1,link:"",className:"course-tag",minDirectRewardRatio:0},bindAgencyRelation:{}}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach((function(t){Object(r.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(m.e)(["DrpSwitch"])),created:function(){this.showTagLink()},methods:{expire:function(){this.counting=!1},sellOut:function(){this.isEmpty=!0,this.$emit("goodsEmpty")},showTagLink:function(){this.DrpSwitch?(this.initTagData(),this.getAgencyBindRelation()):this.tagData.isShow=!1},getAgencyBindRelation:function(){var e=this;p.a.getAgencyBindRelation().then((function(t){t.agencyId?(e.bindAgencyRelation=t,e.tagData.isShow=!0):e.tagData.isShow=!1}))},initTagData:function(){var e=this;p.a.getDrpSetting().then((function(t){e.drpSetting=t,e.tagData.minDirectRewardRatio=t.minDirectRewardRatio;var i={type:"classroom",id:e.classroomId,merchant_id:e.drpSetting.merchantId};e.tagData.link=e.drpSetting.distributor_template_url+"?"+h.a.stringify(i);var s=e.drpSetting.minDirectRewardRatio/100*e.price;e.tagData.earnings=(Math.floor(100*s)/100).toFixed(2)}))}}},b=Object(c.a)(g,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"course-detail__head pos-rl"},[i("div",{staticClass:"course-detail__head--img"},[i("img",{attrs:{src:e.cover,alt:""}})]),e.seckillActivities&&e.counting&&!e.isEmpty&&"ongoing"===e.seckillActivities.status?i("countDown",{attrs:{activity:e.seckillActivities},on:{timesUp:e.expire,sellOut:e.sellOut}}):e._e(),i("tagLink",{attrs:{"tag-data":e.tagData}})],1)}),[],!1,null,null,null).exports,y=i("8807"),w=i("86ee"),_={name:"CourseSetList",components:{course:y.a,moreMask:w.a},props:{courseSets:{default:null},title:{default:""},defaulValue:{default:""},disableMask:{type:Boolean,default:!1},feedback:{type:Boolean,default:!0}},data:function(){return{maxShowNum:5}},computed:{partCourseSets:function(){return this.courseSets.slice(0,5)}},methods:{loadMore:function(){this.$emit("update:disableMask",!0)}}},C=Object(c.a)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("e-panel",{attrs:{title:e.title,"need-flex":!1,"defaul-value":e.defaulValue}},[e.courseSets.length?[!e.disableMask&&e.courseSets.length>5?i("moreMask",{attrs:{"force-show":!0},on:{maskLoadMore:e.loadMore}},[e._l(e.partCourseSets,(function(t){return[i("course",{staticStyle:{"padding-left":"0","padding-right":"0"},attrs:{feedback:e.feedback,course:t}})]}))],2):[e._l(e.courseSets,(function(t){return[i("course",{staticStyle:{"padding-left":"0","padding-right":"0"},attrs:{feedback:e.feedback,course:t}})]}))]]:e._e()],2)}),[],!1,null,null,null).exports,O=(i("c5f6"),{name:"Service",props:["services"]}),j=Object(c.a)(O,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"course-detail__service"},[i("span",[e._v("承诺服务：")]),e._l(e.services,(function(t){return[i("span",{staticClass:"course-detail__service-icon"},[e._v(e._s(t.shortName))])]}))],2)}),[],!1,null,null,null).exports,x=i("0d25"),k=i("6647");function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function D(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?S(Object(i),!0).forEach((function(t){Object(r.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var T={components:{service:j},filters:{filterPrice:function(e){return 0===Number(e)?k.a.t("classLearning.free"):"¥".concat(e)}},props:{details:{default:{}},joinStatus:{default:!1},showNumberData:{type:String,default:""}},watch:{learnExpiryHtml:{immediate:!0,handler:function(e){this.$emit("getLearnExpiry",{val:e})}}},computed:D(D({},Object(m.e)(["vipSwitch"])),{},{learnExpiryHtml:function(){var e=this.joinStatus,t=this.details.expiryValue,i=this.details.expiryMode;if(this.details.vipDeadline){var s=new Date(1e3*t);return Object(x.formatFullTime)(s).slice(0,10)+this.$t("classLearning.canLearnBefore")}if(e)return"forever"==i?this.$t("classLearning.permanent"):0!=e.deadline?e.deadline.slice(0,10)+this.$t("classLearning.canLearnBefore"):"永久有效";switch(i){case"forever":return this.$t("classLearning.permanent");case"date":var r=new Date(1e3*t);return Object(x.formatFullTime)(r).slice(0,10)+this.$t("classLearning.canLearnBefore");case"days":return this.$t("classLearning.studyWithinDay",{number:t})}},validityText:function(){return this.details.vipDeadline?this.$t("classLearning.vipValidity"):this.$t("classLearning.validity")}}),methods:{toCertificate:function(){this.$router.push({path:"/certificate/list/".concat(this.$route.params.id)})}}},P=Object(c.a)(T,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"classroom-plan"},[i("e-panel",{attrs:{title:e.details.title,type:e.$route.query.hasCertificate}},[i("div",{staticClass:"course-detail__plan-price"},[i("span",{class:{isFree:0===Number(e.details.price)}},[e._v(e._s(e._f("filterPrice")(e.details.price)))]),"join"===e.showNumberData?i("span",{staticClass:"plan-price__student-num"},[i("i",{staticClass:"iconfont icon-people"}),e._v(e._s(e.details.studentNum))]):"visitor"===e.showNumberData?i("span",{staticClass:"plan-price__student-num"},[i("i",{staticClass:"iconfont icon-visibility"}),e._v(e._s(e.details.hitNum))]):e._e()])]),i("div",{staticClass:"course-detail__validity"},[e.details.vipLevel&&e.vipSwitch?i("div",{staticClass:"mb15"},[i("span",{staticClass:"mr20"},[e._v("会员免费")]),i("img",{staticClass:"vipIcon",attrs:{src:e.details.vipLevel.icon}}),i("router-link",{staticClass:"color-primary",attrs:{to:{path:"/vip",query:{id:e.details.vipLevel.id}}}},[e._v(e._s(e.details.vipLevel.name)+"免费学")])],1):e._e(),e.details.service.length?i("service",{attrs:{services:e.details.service}}):e._e(),i("div",[i("span",[e._v(e._s(e.validityText)+"：")]),i("span",{domProps:{innerHTML:e._s(e.learnExpiryHtml)}})])],1),e.$route.query.hasCertificate?i("div",{staticClass:"course-detail__certificate",on:{click:e.toCertificate}},[e._m(0),i("i",{staticClass:"van-icon van-icon-arrow pull-right"})]):e._e()],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("span",{staticClass:"certificate-icon"},[this._v("证")]),this._v("证书")])}],!1,null,null,null).exports,L=i("b127"),$=i("2095"),E=i("4928");function I(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}i("3b2b");var N={name:"Reviews",components:{EDrag:i("f13d").a},data:function(){return{value:0,message:"",reviews:null,showDrag:!1}},props:{details:{type:Object,value:function(){}}},watch:{details:{handler:function(e){this.reviews=e.myReview},immediate:!0,deep:!0}},methods:{handleSmsSuccess:function(e){var t,i,s=this;Number(this.details.parentId)?(i="course",t=this.details.id):(i="goods",t=this.details.goodsId),this.showDrag=!1,p.a.createReview({data:{targetType:i,targetId:t,content:this.message,rating:this.value,userId:this.user.id,_dragCaptchaToken:e}}).then((function(e){s.reviews=e}))},onSubmit:function(){0!=this.value?this.message.trim()?this.showDrag=!0:this.$toast(this.$t("courseLearning.evaluationContentCannotBeEmpty")):this.$toast(this.$t("courseLearning.scoreCannotBeBlank"))},onResetReviews:function(){this.message=this.reviews.content,this.value=1*this.reviews.rating,this.reviews=null}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?I(Object(i),!0).forEach((function(t){Object(r.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):I(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(m.e)({user:function(e){return e.user}})),filters:{createdTime:function(e){var t=new RegExp("-","g"),i=e.replace(t,"/"),s=(i=i.slice(0,-9)).slice(11,13),r="";s>=0&&s<6?r="凌晨":s>=6&&s<12?r="上午":s>=12&&s<18?r="下午":s>=18&&s<24&&(r="晚上");var a=new RegExp("T","g");return i.replace(a," "+r)}}},F=Object(c.a)(N,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"course-reviews"},[i("div",{staticClass:"course-reviews__heading"},[e._v("\n    "+e._s(e.$t("courseLearning.myEvaluation"))+"\n    "),null!==e.reviews?i("span",{staticClass:"pull-right reset-reviews",on:{click:e.onResetReviews}},[e._v(e._s(e.$t("courseLearning.reEvaluation")))]):e._e()]),i("div",{staticClass:"course-reviews__body"},[null===e.reviews?i("div",{staticClass:"text-center"},[i("van-rate",{attrs:{size:25,color:"#ffd21e","void-icon":"star","void-color":"#eee"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),i("van-field",{staticStyle:{border:"1px solid #eee",padding:"10px","margin-top":"10px"},attrs:{rows:"2",autosize:"",type:"textarea",maxlength:"500",placeholder:e.$t("courseLearning.pleaseInputEvaluation"),"show-word-limit":""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),i("van-button",{staticStyle:{"border-radius":"8px","margin-top":"10px",background:"#408ffb",color:"#fff"},attrs:{type:"default",size:"small"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("courseLearning.submit")))])],1):i("div",{staticClass:"clearfix"},[i("div",{staticClass:"pull-left course-reviews__avatar"},[i("img",{attrs:{src:e.reviews.user.avatar.large,alt:""}})]),i("div",{staticClass:"pull-left course-reviews__content"},[i("div",{staticClass:"reviews-content__header clearfix"},[i("span",{staticClass:"reviews-content__header__nickname pull-left"},[e._v("\n            "+e._s(e.reviews.user.nickname)+"\n          ")]),i("span",{staticClass:"reviews-content__header__time pull-right"},[e._v("\n            "+e._s(e._f("createdTime")(e.reviews.createdTime))+"\n          ")])]),i("div",{staticClass:"reviews-content_rating"},[i("van-rate",{staticClass:"plan-rate",attrs:{readonly:"",value:1*e.reviews.rating,gutter:"2"}})],1),i("div",{staticClass:"reviews-content_text"},[e._v(e._s(e.reviews.content))])])])]),e.showDrag?i("van-popup",{staticStyle:{width:"95%"},attrs:{value:!0}},[i("e-drag",{ref:"dragComponent",staticStyle:{width:"auto"},on:{success:e.handleSmsSuccess}})],1):e._e()],1)}),[],!1,null,null,null).exports,M=i("faa5");function R(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function A(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?R(Object(i),!0).forEach((function(t){Object(r.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):R(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var B={components:{directory:L.a,detailHead:b,detailPlan:P,teacher:l,courseSetList:C,infoCollection:E.a,Reviews:F},props:["details","planDetails"],data:function(){return{headBottom:0,active:1,scrollFlag:!1,tabs:["classLearning.intor","classLearning.course"],tabsClass:"",errorMsg:"",classroomSettings:{},isShowForm:!1,paramsList:{action:"buy_after",targetType:"classroom",targetId:this.details.classId},showNumberData:"",show:!1,show_classroom_review:this.$store.state.goods.show_classroom_review}},mixins:[$.a],computed:A({},Object(m.e)("classroom",{currentJoin:function(e){return e.currentJoin}})),created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.getSettings({query:{type:"classroom"}}).catch((function(e){}));case 2:e.classroomSettings=t.sent,e.getGoodSettings();case 4:case"end":return t.stop()}}),t)})))()},watch:{currentJoin:{handler:function(e,t){var i=this;if(e){s.a.loading({duration:0,message:"加载中...",forbidClick:!0});var r={action:"buy_after",targetType:"classroom",targetId:this.details.classId};this.getInfoCollectionEvent(r).then((function(e){if(Object.keys(e).length)return i.userInfoCollect=e,void i.getInfoCollectionForm(e.id).then((function(e){i.isShowForm=!0,s.a.clear()}));s.a.clear()}))}},immediate:!0},$route:function(e,t){this.resetFrom()}},mounted:function(){window.addEventListener("touchmove",this.handleScroll),this.showDialog()},destroyed:function(){window.removeEventListener("touchmove",this.handleScroll)},methods:A(A({},Object(m.d)("classroom",{setCurrentJoin:M.p})),{},{replaceGoodsPage:function(){this.$router.replace({path:"/goods/".concat(this.details.goodsId,"/show")})},gotoGoodsPage:function(){this.$router.push({path:"/goods/".concat(this.details.goodsId,"/show")})},showDialog:function(e){var t="",i="";if(e)this.errorMsg="";else{var r=function(){};if(this.details.member&&(this.details.member.access&&(t=this.details.member.access.code),t&&"success"!==t)){if(this.errorMsg=this.getErrorMsg(t),"classroom.expired"===t||"member.expired"===t){i="班级已到期，无法继续学习，是否退出";var a={id:this.details.classId};return r=function(){p.a.deleteClassroom({query:a}).then((function(e){e.success?window.location.reload():s.a.fail("退出班级失败，请稍后重试")}))},void this.callConfirm(i,r)}var n=this.details.vipLevel?this.details.vipLevel.name:"",o={"vip.member_expired":{message:"您的会员已到期，会员班级已无法学习，请续费会员，或退出后重新购买班级。",confirmButtonText:"续费会员"},"vip.not_member":{message:"您不是".concat(n,"，请购买").concat(n,"后兑换该班级学习。或退出后重新购买班级。"),confirmButtonText:"购买会员"},"vip.level_low":{message:"您不是".concat(n,"，请购买").concat(n,"后兑换该班级学习。或退出后重新购买班级。"),confirmButtonText:"购买会员"},"vip.level_not_exist":{message:"您不是".concat(n,"，请购买").concat(n,"后兑换该班级学习。或退出后重新购买班级。"),confirmButtonText:"购买会员"},"vip.vip_right_not_exist":{message:"很抱歉，该班级已不属于会员权益，请退出后重新购买。",showConfirmButton:!1}};o[t]?this.vipCallConfirm(o[t]):s.a.fail(this.errorMsg)}}},handleScroll:function(){var e=this;if(!this.scrollFlag){this.scrollFlag=!0;var t=this.$refs;setTimeout((function(){e.headBottom=t.head.$el.getBoundingClientRect().bottom,e.scrollFlag=!1,e.tabsClass=e.headBottom<=0?"van-tabs--fixed":""}),400)}},getErrorMsg:function(e){switch(e){case"classroom.not_found":return"当前班级不存在";case"classroom.unpublished":return"当前班级未发布";case"classroom.expired":return"当前班级已过期";case"user.not_login":return"用户未登录";case"user.locked":return"用户被锁定";case"member.not_found":return"用户未加入班级";case"member.auditor":return"用户是旁听生，请前往商品页购买";case"member.expired":return"班级已过期";case"vip.vip_closed":return"网校已关闭会员功能";case"vip.not_login":return"用户未登录";case"vip.not_member":return"当前用户并不是vip";case"vip.member_expired":return"用户会员服务已过期";case"vip.level_not_exist":return"用户会员等级或班级会员不存在";case"vip.level_low":return"用户会员等级过低";default:return"异常错误"}},callConfirm:function(e,t){a.a.confirm({message:e,title:""}).then((function(){t()})).catch((function(){}))},vipCallConfirm:function(e){this.show=!0,a.a.confirm(A(A({},e),{},{title:"",confirmButtonColor:"#1895E7",cancelButtonText:"退出班级",cancelButtonColor:"#FD4852",messageAlign:"left",overlay:!1,beforeClose:this.beforeClose}))},clickCloseOverlay:function(){this.show=!1,a.a.close()},beforeClose:function(e,t){var i=this;if("confirm"===e)this.$router.push({path:"/vip",query:{id:this.details.vipLevel.id}}),t();else{if(!this.show)return;var s={id:this.details.classId};p.a.deleteClassroom({query:s}).then((function(e){e.success&&(i.replaceGoodsPage(),t())}))}},onCancelForm:function(){this.setCurrentJoin(!1),this.isShowForm=!1},getGoodSettings:function(){var e=this;p.a.getSettings({query:{type:"goods"}}).then((function(t){e.showNumberData=t.show_number_data}))}})},H=Object(c.a)(B,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"course-detail classroom-detail"},[i("div",{staticClass:"join-after"},[i("detail-head",{ref:"head",attrs:{cover:e.details.cover,price:e.planDetails.price,"classroom-id":e.details.classId}}),i("van-tabs",{class:e.tabsClass,model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.tabs,(function(t){return i("van-tab",{key:t,attrs:{title:e.$t(t)}})})),1),i("div",{directives:[{name:"show",rawName:"v-show",value:0==e.active,expression:"active == 0"}]},[i("detail-plan",{attrs:{details:e.planDetails,"join-status":e.details.joinStatus,showNumberData:e.showNumberData}}),i("div",{staticClass:"segmentation"}),i("e-panel",{ref:"about",staticClass:"about",attrs:{title:e.$t("classLearning.intor")}},[i("div",{domProps:{innerHTML:e._s(e.details.summary)}})]),i("div",{staticClass:"segmentation"}),i("teacher",{staticClass:"teacher",attrs:{"teacher-info":e.details.teachers,title:e.$t("classLearning.teacher")}}),i("div",{staticClass:"segmentation"}),i("teacher",{staticClass:"teacher",attrs:{"teacher-info":e.details.headTeacher?[e.details.headTeacher]:[],title:e.$t("classLearning.classTeacher"),"defaul-value":e.$t("classLearning.headTeacherHasNotBeenSet")}}),i("div",{staticClass:"segmentation"}),e.show_classroom_review?i("reviews",{attrs:{details:e.details}}):e._e(),i("div",{staticClass:"segmentation"}),i("div",{staticClass:"segmentation"}),i("div",{staticClass:"segmentation"})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active == 1"}]},[i("course-set-list",{ref:"course",attrs:{feedback:!e.errorMsg,"course-sets":e.details.courses,"disable-mask":!0,title:e.$t("classLearning.course"),"defaul-value":e.$t("classLearning.empty")},nativeOn:{click:function(t){return e.showDialog("click")}}})],1)],1),i("van-action-sheet",{staticClass:"minHeight50",attrs:{title:e.userInfoCollectForm.formTitle,"close-on-click-overlay":!1,"safe-area-inset-bottom":!0},on:{cancel:e.onCancelForm},model:{value:e.isShowForm,callback:function(t){e.isShowForm=t},expression:"isShowForm"}},[i("info-collection",{attrs:{userInfoCollectForm:e.userInfoCollectForm,formRule:e.userInfoCollectForm.items},on:{submitForm:e.onCancelForm}})],1),0==e.active&&this.details.goodsId&&"closed"!==this.details.status?i("e-footer",{nativeOn:{click:function(t){return e.gotoGoodsPage(t)}}},[e._v("\n    "+e._s(e.$t("classLearning.viewDetails"))+"\n  ")]):e._e(),i("van-overlay",{attrs:{show:e.show,"z-index":"1000"},on:{click:e.clickCloseOverlay}})],1)}),[],!1,null,null,null).exports,q={name:"ReviewList",components:{review:i("e656").a,moreMask:w.a},props:["reviews","title","targetId","defaulValue","type"],data:function(){return{maxShowNum:5}},computed:{isClass:function(){return"classroom"===this.type}},methods:{loadMore:function(){this.$router.push({path:"/comment/".concat(this.targetId),query:{type:this.type}})}}},J=Object(c.a)(q,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("e-panel",{attrs:{title:e.title,"need-flex":!1,"defaul-value":e.defaulValue}},[e.reviews.length?i("moreMask",{attrs:{"max-height":400},on:{maskLoadMore:e.loadMore}},[e._l(e.reviews,(function(t){return[i("review",{attrs:{review:t,"is-class":e.isClass,course:t.course}})]}))],2):e._e()],1)}),[],!1,null,null,null).exports,V={name:"EPopup",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},contentClass:{type:String,default:""}},computed:{popupShow:{get:function(){return this.show},set:function(e){this.$emit("update:show",e)}}},methods:{toggleClick:function(){this.popupShow=!1}}},z=Object(c.a)(V,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("van-popup",{staticClass:"e-popup",attrs:{position:"bottom"},model:{value:e.popupShow,callback:function(t){e.popupShow=t},expression:"popupShow"}},[i("div",{staticClass:"e-popup__title"},[i("span",{staticClass:"name"},[e._v(e._s(e.title))]),i("i",{staticClass:"icon h5-icon h5-icon-guanbi",on:{click:e.toggleClick}})]),i("div",{staticClass:"e-popup__content",class:e.contentClass},[e._t("default")],2)])}),[],!1,null,null,null).exports,U=i("639e"),W={name:"EMiniCoupon",mixins:[i("8813").a],props:{item:{type:Object,default:function(){return{}}}}},Q=Object(c.a)(W,(function(){var e=this.$createElement;return(this._self._c||e)("van-tag",{staticClass:"mini-coupon ml5",attrs:{type:"danger"}},[this._v(this._s(this.priceHtml(this.item,!1)))])}),[],!1,null,null,null).exports,G=i("8b9d"),X=i("a262"),K={name:"Onsale",components:{coupon:U.a,miniCoupon:Q,EPopup:z},mixins:[G.a,X.a],props:["unreceivedCoupons","miniCoupons","activities"],data:function(){return{couponListShow:!1}}},Y=Object(c.a)(K,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("e-panel",{attrs:{title:"优惠"}},[e.activities.groupon?i("van-cell",{staticClass:"course-detail__cell",attrs:{"is-link":""},on:{click:function(t){return e.activityHandle(e.activities.groupon.id)}}},[i("template",{slot:"title"},[i("span",{staticClass:"text-12"},[e._v("拼团：")]),i("van-tag",{staticClass:"ml5",staticStyle:{"background-color":"#ffaa00"}},[e._v("拼团")]),i("span",{staticClass:"text-12 dark"},[e._v("跟好友一起买更划算哦！")])],1)],2):e._e(),e.activities.cut?i("van-cell",{staticClass:"course-detail__cell",attrs:{"is-link":""},on:{click:function(t){return e.activityHandle(e.activities.cut.id)}}},[i("template",{slot:"title"},[i("span",{staticClass:"text-12"},[e._v("砍价：")]),i("van-tag",{staticClass:"ml5",staticStyle:{"background-color":"#ffaa00"}},[e._v("砍价")]),i("span",{staticClass:"text-12 dark"},[e._v("最低可砍至1分钱！")])],1)],2):e._e(),e.unreceivedCoupons.length?i("van-cell",{staticClass:"course-detail__cell",attrs:{"is-link":""},on:{click:function(t){e.couponListShow=!0}}},[i("template",{slot:"title"},[i("span",{staticClass:"text-12"},[e._v("领券：")]),e._l(e.miniCoupons,(function(e,t){return i("mini-coupon",{key:t,attrs:{item:e}})}))],2)],2):e._e(),i("e-popup",{staticClass:"coupon-popup white-background",attrs:{show:e.couponListShow,title:"优惠券"},on:{"update:show":function(t){e.couponListShow=t}}},[e._l(e.unreceivedCoupons,(function(t,s){return i("coupon",{key:s,attrs:{index:s,coupon:t,"show-button":!0},on:{couponHandle:function(t){return e.couponHandle(t)}}})})),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.unreceivedCoupons.length,expression:"!unreceivedCoupons.length"}],staticClass:"coupon-empty"},[i("img",{staticClass:"empty-img",attrs:{src:"static/images/coupon_empty.png"}}),i("div",{staticClass:"empty-text"},[e._v("暂无优惠券")])])],2)],1)}),[],!1,null,null,null).exports,Z=i("d863");function ee(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function te(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(i),!0).forEach((function(t){Object(r.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ee(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ie={components:{directory:L.a,detailHead:b,detailPlan:P,teacher:l,courseSetList:C,reviewList:J,moreMask:w.a,onsale:Y,infoCollection:E.a},mixins:[Z.a,G.a,X.a,$.a],props:["details","planDetails"],data:function(){return{tops:{aboutTop:0,courseTop:0,reviewTop:0},active:0,scrollFlag:!1,tabs:["班级介绍","班级课程","学员评价"],tabsClass:"",loadMoreAbout:!1,disableMask:!1,learnExpiry:"长期有效",unreceivedCoupons:[],miniCoupons:[],marketingActivities:{seckill:{}},isEmpty:!0,scrollTime:null,isManualSwitch:!1,classroomSettings:{},isShowForm:!1}},watch:{$route:function(e,t){this.resetFrom()}},computed:te(te({},Object(m.e)(["couponSwitch","user"])),{},{accessToJoin:function(){return"success"===this.details.access.code||"user.not_login"===this.details.access.code},vipAccessToJoin:function(){var e=!1;return!(!this.details.vipLevel||!this.user.vip)&&(this.details.vipLevel.seq<=this.user.vip.seq&&(e=!(new Date(this.user.vip.deadline).getTime()<(new Date).getTime())),e)},showOnsale:function(){return 0!==Number(this.planDetails.price)&&!!(this.unreceivedCoupons.length||Object.keys(this.marketingActivities).length&&!this.onlySeckill)},onlySeckill:function(){return 1===Object.keys(this.marketingActivities).length&&this.marketingActivities.seckill},seckillStatus:function(){var e=this.marketingActivities.seckill;return Object(x.dateTimeDown)(new Date(e.endTime).getTime())},showSeckill:function(){var e=this.marketingActivities.seckill;return 0!==Number(this.planDetails.price)&&e&&"ongoing"===e.status&&!this.isEmpty}}),created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.getSettings({query:{type:"classroom"}}).catch((function(e){}));case 2:e.classroomSettings=t.sent;case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;this.couponSwitch&&p.a.searchCoupon({params:{targetId:this.details.classId,targetType:"classroom"}}).then((function(t){e.unreceivedCoupons=t.data,e.miniCoupons=e.unreceivedCoupons.length>3?e.unreceivedCoupons.slice(0,4):e.unreceivedCoupons})).catch((function(e){})),p.a.classroomsActivities({query:{id:this.details.classId}}).then((function(t){e.marketingActivities=t,e.isEmpty=!t.seckill||!+t.seckill.productRemaind})).catch((function(e){})),window.addEventListener("touchmove",this.handleScroll),window.addEventListener("scroll",this.handleScroll),setTimeout((function(){window.scrollTo(0,0)}),100)},destroyed:function(){window.removeEventListener("touchmove",this.handleScroll),window.removeEventListener("scroll",this.handleScroll)},methods:te(te({},Object(m.d)("classroom",{setCurrentJoinClass:M.p})),{},{onTabClick:function(e,t){var i=this;this.isManualSwitch=!0;var s=this.$refs[this.transIndex2Tab(e)];window.scrollTo(0,s.$el.offsetTop-44),setTimeout((function(){return i.isManualSwitch=!1}),500)},transIndex2Tab:function(e){return["about","course","review"][e]},handleScroll:function(){var e=this;if(!this.scrollFlag){this.scrollFlag=!0;var t=this.$refs,i=["about","course","review"].reverse();this.scrollTime&&clearTimeout(this.scrollTime),this.scrollTime=setTimeout((function(){Object.keys(t).forEach((function(i){e.tops["".concat(i,"Top")]=t[i].$el.getBoundingClientRect().top})),e.scrollFlag=!1,e.tabsClass=e.tops.aboutTop-44<=0?"van-tabs--fixed":"",e.setCurrentActive(i)}),400)}},setCurrentActive:function(e){if(!this.isManualSwitch){for(var t=0;t<e.length;t++)if(!(this.tops["".concat(e[t],"Top")]-44>0))return void(this.active=e.length-t-1);this.active=0}},handleJoin:function(){var e=this.vipAccessToJoin;if(this.accessToJoin||e){var t=this.details,i=this.planDetails,s=1===Number(t.buyable)||0==+i.price||e;this.$store.state.token?s&&(!+i.price||e?this.collectUseInfoEvent():this.$router.push({name:"order",params:{id:t.classId},query:{expiryScope:this.learnExpiry,targetType:"classroom"}})):this.$router.push({name:"login",query:{redirect:this.redirect}})}},joinFreeClass:function(){var e=this;p.a.joinClass({query:{classroomId:this.details.classId}}).then((function(t){e.setCurrentJoinClass(!0),s.a.clear(),e.details.joinStatus=t})).catch((function(e){}))},getLearnExpiry:function(e){var t=e.val;this.learnExpiry=t},sellOut:function(){this.isEmpty=!0},getParamsList:function(){this.paramsList={action:"buy_before",targetType:"classroom",targetId:this.details.classId}},collectUseInfoEvent:function(){var e=this;this.hasUserInfoCollectForm?this.isShowForm=!0:(s.a.loading({duration:0,message:"加载中...",forbidClick:!0}),this.getParamsList(),this.getInfoCollectionEvent(this.paramsList).then((function(t){if(Object.keys(t).length)return e.userInfoCollect=t,void e.getInfoCollectionForm(t.id).then((function(t){e.isShowForm=!0,s.a.clear()}));e.joinFreeClass()})))}})},se=Object(c.a)(ie,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"course-detail classroom-detail"},[i("div",{staticClass:"join-before"},[i("detail-head",{attrs:{cover:e.details.cover,price:e.planDetails.price,"classroom-id":e.details.classId,"seckill-activities":e.marketingActivities.seckill},on:{goodsEmpty:e.sellOut}}),i("detail-plan",{attrs:{details:e.planDetails,"join-status":e.details.joinStatus},on:{getLearnExpiry:e.getLearnExpiry}}),i("div",{staticClass:"segmentation"}),e.showOnsale?[i("onsale",{attrs:{"unreceived-coupons":e.unreceivedCoupons,"mini-coupons":e.miniCoupons,activities:e.marketingActivities}}),i("div",{staticClass:"segmentation"})]:e._e(),i("van-tabs",{class:e.tabsClass,on:{click:e.onTabClick},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.tabs,(function(e){return i("van-tab",{key:e,attrs:{title:e}})})),1),i("e-panel",{ref:"about",staticClass:"about",attrs:{title:"班级介绍"}},[i("more-mask",{attrs:{disabled:e.loadMoreAbout},on:{maskLoadMore:function(t){e.loadMoreAbout=!0}}},[i("div",{domProps:{innerHTML:e._s(e.details.summary)}})])],1),i("div",{staticClass:"segmentation"}),i("teacher",{staticClass:"teacher",attrs:{"teacher-info":e.details.teachers,title:"教师介绍"}}),i("div",{staticClass:"segmentation"}),i("teacher",{staticClass:"teacher",attrs:{"teacher-info":e.details.headTeacher?[e.details.headTeacher]:[],title:"班主任","defaul-value":"尚未设置班主任"}}),i("div",{staticClass:"segmentation"}),i("course-set-list",{ref:"course",attrs:{"course-sets":e.details.courses,"disable-mask":e.disableMask,title:"班级课程","defaul-value":"暂无课程"},on:{"update:disableMask":function(t){e.disableMask=t},"update:disable-mask":function(t){e.disableMask=t}}}),i("div",{staticClass:"segmentation"}),i("review-list",{ref:"review",attrs:{"target-id":e.details.classId,reviews:1==e.classroomSettings.show_review?e.details.reviews:[],title:"学员评价",type:"classroom","defaul-value":"暂无评价"}}),i("van-action-sheet",{staticClass:"minHeight50",attrs:{title:e.userInfoCollectForm.formTitle,"close-on-click-overlay":!1,"safe-area-inset-bottom":!0},model:{value:e.isShowForm,callback:function(t){e.isShowForm=t},expression:"isShowForm"}},[i("info-collection",{attrs:{userInfoCollectForm:this.userInfoCollectForm,formRule:this.userInfoCollectForm.items},on:{submitForm:e.joinFreeClass}})],1),!e.marketingActivities.seckill||e.marketingActivities.seckill&&(e.isEmpty||"已到期"===e.seckillStatus)||0==e.planDetails.price?i("e-footer",{attrs:{disabled:!e.accessToJoin},nativeOn:{click:function(t){return e.handleJoin(t)}}},[e._v("\n      "+e._s(e._f("filterJoinStatus")(e.details.access.code,"classroom",e.vipAccessToJoin)))]):e._e(),e.showSeckill&&"已到期"!==e.seckillStatus?i("div",[i("e-footer",{attrs:{disabled:!e.accessToJoin,half:"true"},nativeOn:{click:function(t){return e.handleJoin(t)}}},[e._v(e._s(e._f("filterJoinStatus")(e.details.access.code,"classroom",e.vipAccessToJoin)))]),i("e-footer",{attrs:{half:"true"},nativeOn:{click:function(t){return e.activityHandle(e.marketingActivities.seckill.id)}}},[e._v("去秒杀")])],1):e._e()],2)])}),[],!1,null,null,null).exports;function re(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}var ae={components:{},data:function(){return{details:{isEmpty:!0,summary:"",joinStatus:!1,courses:[],teachers:[],assistants:[],headTeacher:{},access:{code:"加载中"},cover:"",reviews:[],myReview:null,classId:0,vipLevel:null},planDetails:{title:"",service:[],price:"0",studentNum:0,expiryMode:"forever",expiryValue:"0",vipLevel:null,hitNum:"0"},currentComp:""}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?re(Object(i),!0).forEach((function(t){Object(r.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):re(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(m.e)({isLoading:function(e){return e.isLoading}})),watch:{"details.joinStatus":{handler:function(e){this.getComponent(e)}}},created:function(){var e=this,t=this.$route.params.id;p.a.getClassroomDetail({query:{classroomId:t}}).then((function(t){t.member?(e.getComponent(t.member),e.getDetails(t)):e.$router.push({path:"/goods/".concat(t.goodsId,"/show")})})).catch((function(e){s.a.fail(e.message)}))},methods:{getDetails:function(e){var t=0===Object.keys(e).length,i=e.about,s=!t&&e.member,r=e.courses,a=e.teachers,n=e.assistants,o=e.buyable,c=e.vipLevel,l=e.headTeacher,u=e.access,d=e.reviews,p=e.myReview,f=e.expiryMode,h=e.member,m=e.expiryValue,v=e.title,g=e.price,b=e.studentNum,y=e.service,w=e.goodsId,_=e.specsId,C=e.hitNum,O=e.vipDeadline,j=e.status,x=e.cover.large,k=e.id,S={title:v,service:y,price:g,studentNum:b,expiryMode:f,expiryValue:m,vipLevel:c,hitNum:C,vipDeadline:O};this.planDetails=S,this.details={summary:i,joinStatus:s,isEmpty:t,courses:r,classId:k,buyable:o,vipLevel:c,teachers:a,assistants:n,headTeacher:l,access:u,cover:x,reviews:d,myReview:p,member:h,goodsId:w,specsId:_,status:j}},getComponent:function(e){this.currentComp=e?H:se}}},ne=Object(c.a)(ae,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"course-detail"},[this.isLoading?t("e-loading"):this._e(),t(this.currentComp,{tag:"component",attrs:{details:this.details,"plan-details":this.planDetails}})],1)}),[],!1,null,null,null);t.default=ne.exports},"8b9d":function(e,t,i){"use strict";i("6762"),i("2fdb"),i("ac6a"),i("8615"),i("e7e5");var s=i("d399"),r=i("3ce7"),a={classroom:"classroom",course:"course",vip:"vip",all:"all"};t.a={methods:{couponHandle:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.$store.state.token)if(e.currentUserCoupon||t)this.hasreceiveCoupon(e);else{var i=e.token;r.a.receiveCoupon({disableLoading:!0,data:{token:i}}).then((function(t){e.currentUserCoupon=t,s.a.success({message:"领取成功",duration:2e3})})).catch((function(t){s.a.fail(t.message),e.unreceivedNum="0"}))}else this.$router.push({name:"login",query:{redirect:this.$route.fullPath}})},hasreceiveCoupon:function(e){var t=this,i=e.targetDetail.product,r=e.targetDetail.numType;if(Object.values(a).includes(i)){if("single"===r){var n=e.target.id;if(i===a.vip)return void this.$router.push({path:"/vip",query:{id:n}});this.getPathParams(i,n).then((function(e){var s=e.id;s&&t.$router.push({path:"/".concat(i,"/").concat(s)})}))}else if(["multi","all"].indexOf(r)>-1){if("vip"===i)return void this.$router.push({path:"/".concat(e.targetDetail.product)});if("all"===i)return void this.$router.push({path:"/"});this.$router.push({path:"/".concat(e.targetDetail.product,"/explore")})}}else s.a.fail("暂不支持查看：".concat(i,"类型商品"))},getPathParams:function(e,t){return e!==a.course?Promise.resolve({id:t}):r.a.getCourseByCourseSet({query:{id:t}}).then((function(e){return e.length&&e[0]?{id:e[0].id}:{message:"当前课程不存在了"}})).catch((function(e){s.a.fail(e.message)}))}}}},"9e6a":function(e,t,i){"use strict";var s=i("d233"),r=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:s.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},n=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},o=function(e,t,i){if(e){var s=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,n=/(\[[^[\]]*])/.exec(s),o=n?s.slice(0,n.index):s,c=[];if(o){if(!i.plainObjects&&r.call(Object.prototype,o)&&!i.allowPrototypes)return;c.push(o)}for(var l=0;null!==(n=a.exec(s))&&l<i.depth;){if(l+=1,!i.plainObjects&&r.call(Object.prototype,n[1].slice(1,-1))&&!i.allowPrototypes)return;c.push(n[1])}return n&&c.push("["+s.slice(n.index)+"]"),function(e,t,i){for(var s=t,r=e.length-1;r>=0;--r){var a,n=e[r];if("[]"===n&&i.parseArrays)a=[].concat(s);else{a=i.plainObjects?Object.create(null):{};var o="["===n.charAt(0)&&"]"===n.charAt(n.length-1)?n.slice(1,-1):n,c=parseInt(o,10);i.parseArrays||""!==o?!isNaN(c)&&n!==o&&String(c)===o&&c>=0&&i.parseArrays&&c<=i.arrayLimit?(a=[])[c]=s:a[o]=s:a={0:s}}s=a}return s}(c,t,i)}};e.exports=function(e,t){var i=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||s.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth?e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null===e||void 0===e)return i.plainObjects?Object.create(null):{};for(var c="string"==typeof e?function(e,t){var i,o={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,l=t.parameterLimit===1/0?void 0:t.parameterLimit,u=c.split(t.delimiter,l),d=-1,p=t.charset;if(t.charsetSentinel)for(i=0;i<u.length;++i)0===u[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===u[i]?p="utf-8":"utf8=%26%2310003%3B"===u[i]&&(p="iso-8859-1"),d=i,i=u.length);for(i=0;i<u.length;++i)if(i!==d){var f,h,m=u[i],v=m.indexOf("]="),g=-1===v?m.indexOf("="):v+1;-1===g?(f=t.decoder(m,a.decoder,p),h=t.strictNullHandling?null:""):(f=t.decoder(m.slice(0,g),a.decoder,p),h=t.decoder(m.slice(g+1),a.decoder,p)),h&&t.interpretNumericEntities&&"iso-8859-1"===p&&(h=n(h)),h&&t.comma&&h.indexOf(",")>-1&&(h=h.split(",")),r.call(o,f)?o[f]=s.combine(o[f],h):o[f]=h}return o}(e,i):e,l=i.plainObjects?Object.create(null):{},u=Object.keys(c),d=0;d<u.length;++d){var p=u[d],f=o(p,c[p],i);l=s.merge(l,f,i)}return s.compact(l)}},a262:function(e,t,i){"use strict";var s=i("7067");t.a={methods:{activityHandle:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(s.a)(e,t,i)}}}},b313:function(e,t,i){"use strict";var s=String.prototype.replace,r=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return s.call(e,r,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},d233:function(e,t,i){"use strict";var s=Object.prototype.hasOwnProperty,r=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),n=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},s=0;s<e.length;++s)void 0!==e[s]&&(i[s]=e[s]);return i};e.exports={arrayToObject:n,assign:function(e,t){return Object.keys(t).reduce((function(e,i){return e[i]=t[i],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],s=0;s<t.length;++s)for(var a=t[s],n=a.obj[a.prop],o=Object.keys(n),c=0;c<o.length;++c){var l=o[c],u=n[l];"object"==typeof u&&null!==u&&-1===i.indexOf(u)&&(t.push({obj:n,prop:l}),i.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(r(i)){for(var s=[],a=0;a<i.length;++a)void 0!==i[a]&&s.push(i[a]);t.obj[t.prop]=s}}}(t),e},decode:function(e,t,i){var s=e.replace(/\+/g," ");if("iso-8859-1"===i)return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch(e){return s}},encode:function(e,t,i){if(0===e.length)return e;var s="string"==typeof e?e:String(e);if("iso-8859-1"===i)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var r="",n=0;n<s.length;++n){var o=s.charCodeAt(n);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?r+=s.charAt(n):o<128?r+=a[o]:o<2048?r+=a[192|o>>6]+a[128|63&o]:o<55296||o>=57344?r+=a[224|o>>12]+a[128|o>>6&63]+a[128|63&o]:(n+=1,o=65536+((1023&o)<<10|1023&s.charCodeAt(n)),r+=a[240|o>>18]+a[128|o>>12&63]+a[128|o>>6&63]+a[128|63&o])}return r},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,i,a){if(!i)return t;if("object"!=typeof i){if(r(t))t.push(i);else{if(!t||"object"!=typeof t)return[t,i];(a&&(a.plainObjects||a.allowPrototypes)||!s.call(Object.prototype,i))&&(t[i]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(i);var o=t;return r(t)&&!r(i)&&(o=n(t,a)),r(t)&&r(i)?(i.forEach((function(i,r){if(s.call(t,r)){var n=t[r];n&&"object"==typeof n&&i&&"object"==typeof i?t[r]=e(n,i,a):t.push(i)}else t[r]=i})),t):Object.keys(i).reduce((function(t,r){var n=i[r];return s.call(t,r)?t[r]=e(t[r],n,a):t[r]=n,t}),o)}}},e656:function(e,t,i){"use strict";i("c5f6");var s=i("86ee"),r=i("0d25"),a={name:"Review",components:{moreMask:s.a},filters:{userName:function(e){return e&&e.nickname||"匿名用户"},avatar:function(e){return e&&e.avatar&&e.avatar.middle},time:function(e,t){var i=new Date(e);return"simple"===t?Object(r.formatSimpleTime)(i):"complete"===t?Object(r.formatCompleteTime)(i):e}},props:{review:{type:Object,default:function(){return{}}},course:{type:Object,default:function(){return{}}},disableMask:{type:Boolean,default:!0},isClass:{type:Boolean,default:!0},timeFormat:{type:String,default:"simple"}},data:function(){return{loadAllReview:!1}},computed:{posts:function(){return this.review&&this.review.posts||[]},rating:{get:function(){return Number(this.review.rating)},set:function(){}},emptyRating:{get:function(){return this.rating>=0?Number(5-this.rating):5},set:function(){}},textOption:function(){return{paddingTop:70,lineHeight:25,align:"right",content:this.$t("e.displayAll")}},courseTitle:function(){return this.isClass?"":this.course.displayedTitle}}},n=i("0c7c"),o=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"e-review"},[i("img",{staticClass:"e-review-avatar avatar-img",attrs:{src:e._f("avatar")(e.review.user),alt:""}}),i("div",{staticClass:"e-review-body"},[i("div",[i("span",{staticClass:"e-review-nickname text-14"},[e._v(e._s(e._f("userName")(e.review.user)))]),i("van-rate",{staticClass:"e-review-rating",attrs:{size:15,count:e.emptyRating,readonly:!0,color:"#B0BDC9"},model:{value:e.emptyRating,callback:function(t){e.emptyRating=t},expression:"emptyRating"}}),i("van-rate",{staticClass:"e-review-rating",attrs:{size:15,count:e.rating,readonly:!0,color:"#FFAA00"},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1),i("div",{staticClass:"e-review-time text-12"},[e._v("\n      "+e._s(e._f("time")(e.review.createdTime,e.timeFormat))+"\n    ")]),e.disableMask?i("div",{staticClass:"e-review-content text-14"},[e._v("\n      "+e._s(e.review.content)+"\n    ")]):i("more-mask",{attrs:{text:e.textOption,"max-height":100,disabled:e.loadAllReview},on:{maskLoadMore:function(t){e.loadAllReview=!0}}},[i("div",{staticClass:"e-review-content text-14"},[e._v(e._s(e.review.content))])]),e.courseTitle?i("span",{staticClass:"e-review-origin text-12"},[e._v(e._s(e.$t("e.from"))+"："+e._s(e.courseTitle))]):e._e(),e._l(e.posts,(function(t){return i("div",{key:t,staticClass:"e-review__post"},[i("img",{staticClass:"e-review-avatar e-review__post-avatar avatar-img",attrs:{src:e._f("avatar")(t.user),alt:""}}),i("div",{staticClass:"e-review__post-body"},[i("span",{staticClass:"e-review-nickname text-14"},[e._v(e._s(e._f("userName")(t.user))+" "+e._s(e.$t("e.reply"))+"\n          "+e._s(e._f("userName")(e.review.user))+"：")]),i("div",{staticClass:"e-review-content text-14"},[e._v(e._s(t.content))])])])}))],2)])}),[],!1,null,null,null);t.a=o.exports},f13d:function(e,t,i){"use strict";i("8e6e"),i("ac6a"),i("456d");var s=i("75fc"),r=(i("e7e5"),i("d399")),a=i("bd86"),n=(i("c5f6"),i("3ce7"));function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}var c={props:{tips:{type:String,default:"placeholder.dragTheSliderToCompleteThePuzzle"},limitType:{type:String,default:""}},data:function(){return{imgInfo:{url:"",jigsaw:"",token:""},dragState:{left:0,width:0,currentX:0,currentLeft:0,btnWidth:0,maskWidth:0},dragToEnd:!1}},created:function(){this.initDragCaptcha()},mounted:function(){var e=this.$refs.bar,t=this.$refs.dragBtn,i=e.getBoundingClientRect();Object.assign(this.dragState,{left:Number(i.left.toFixed(2)),width:e.clientWidth,btnWidth:t.offsetWidth/2})},methods:{initDragCaptcha:function(){var e=this,t={};this.limitType&&(t={limitType:this.limitType}),n.a.dragCaptcha({data:t}).then((function(t){e.imgInfo=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t),Object.assign(e.dragState,{currentLeft:0,maskWidth:0}),e.dragToEnd=!1})).catch((function(e){r.a.fail(e.message)}))},handletTouchEnd:function(){var e=this;if(!this.dragToEnd&&this.dragState.currentLeft){var t=this.getToken();this.dragToEnd=!0,n.a.dragValidate({query:{token:t}}).then((function(i){r.a.success(e.$t("e.verificationSuccess")),e.$emit("success",t)})).catch((function(t){r.a.fail(t.message),e.initDragCaptcha()}))}},handleTouchMove:function(e){if(!this.dragToEnd){e.preventDefault();var t=this.$refs.dragBtn,i=this.dragState,s=e.clientX?e.clientX.toFixed(2):e.targetTouches[0].pageX.toFixed(2)-this.$refs.drag.offsetLeft,r=(s-i.left-i.btnWidth).toFixed(2);r<0&&(r=0),s>i.width+this.$refs.drag.offsetLeft&&(r=i.width-this.$refs.dragImg.width),Object.assign(this.dragState,{currentLeft:r,maskWidth:(Number(r)+t.offsetWidth/2).toFixed(2)})}},calPositionX:function(){var e=this.$refs.dragImgBg,t=(e.naturalWidth/e.width).toFixed(2);return(Number(this.dragState.currentLeft).toFixed(2)*t).toFixed(2)},getToken:function(){var e={token:this.imgInfo.token,captcha:this.calPositionX()};return Object(s.a)(btoa(JSON.stringify(e))).reverse().join("")}}},l=i("0c7c"),u=Object(l.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"drag",staticClass:"e-drag"},[i("div",{staticClass:"e-drag-section"},[i("div",{staticClass:"e-drag-img"},[i("img",{ref:"dragImgBg",attrs:{src:e.imgInfo.url,alt:""}}),i("img",{ref:"dragImg",staticClass:"e-drag-img__dragable",style:{left:e.dragState.currentLeft+"px"},attrs:{src:e.imgInfo.jigsaw,alt:""}})]),i("div",{ref:"bar",staticClass:"e-drag-bar"},[i("span",[e._v(e._s(e.$t(e.tips)))]),i("div",{staticClass:"e-drag-bar__mask",style:{width:e.dragState.maskWidth+"px"}}),i("div",{ref:"dragBtn",staticClass:"e-drag-btn",style:{left:e.dragState.currentLeft+"px"},on:{touchend:e.handletTouchEnd,touchmove:e.handleTouchMove}},[i("img",{attrs:{src:"static/images/drag.png",alt:""}})])])])])}),[],!1,null,null,null);t.a=u.exports}}]);