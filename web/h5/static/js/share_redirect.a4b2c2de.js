(window.webpackJsonp=window.webpackJsonp||[]).push([["share_redirect"],{7067:function(e,t,r){"use strict";r("e17f");var i=r("2241"),n=(r("e7e5"),r("d399")),c=r("a026"),o=r("3ce7"),a=/micromessenger/.test(navigator.userAgent.toLowerCase());t.a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||r&&!t)n.a.fail("缺少分享参数");else{var u={domainUri:location.origin,itemUri:"",source:"h5"};o.a.marketingActivities({query:{activityId:e},data:u}).then((function(e){var o=-1!==e.url.indexOf("?")?"&":"?",u=r?"".concat(t).concat(o,"ticket=").concat(e.ticket):e.url;a?window.location.href=u:i.a.confirm({message:"去微信完成活动",confirmButtonText:"复制链接",title:""}).then((function(){try{c.default.prototype.$copyText(u).then((function(){n.a.success("复制成功")}),(function(){n.a.fail("请更换浏览器复制")}))}catch(e){n.a.fail("请更换浏览器复制")}})).catch((function(){}))})).catch((function(e){n.a.fail(e.message)}))}}},"847b":function(e,t,r){"use strict";r.r(t);var i=r("a262"),n=r("d863"),c={name:"ShareRedirect",mixins:[i.a,n.a],data:function(){return{}},mounted:function(){this.afterLogin()}},o=r("0c7c"),a=Object(o.a)(c,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null);t.default=a.exports},a262:function(e,t,r){"use strict";var i=r("7067");t.a={methods:{activityHandle:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(i.a)(e,t,r)}}}},d863:function(e,t,r){"use strict";r("8e6e"),r("ac6a"),r("456d"),r("a481");var i=r("bd86"),n=r("7067"),c=r("3ce7"),o=r("faa5"),a=r("2f62");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a={data:function(){return{redirect:""}},computed:s({},Object(a.e)({user:function(e){return e.user}})),created:function(){this.redirect=decodeURIComponent(this.$route.fullPath)},methods:s(s({},Object(a.d)([o.u])),{},{afterLogin:function(){var e=this;this.checkMobileBind().then((function(t){var r=t.is_bind_mobile,i=t.mobile_bind_mode;e[o.u]({is_bind_mobile:r,mobile_bind_mode:i}),r||"closed"===i?setTimeout(e.jumpAction,1e3):e.$router.replace({name:"binding",query:{redirect:e.$route.query.redirect}})})).catch((function(){setTimeout(e.jumpAction,1e3)}))},jumpAction:function(){var e=this.$route.query.redirect?decodeURIComponent(this.$route.query.redirect):"/",t=this.$route.query.skipUrl?decodeURIComponent(this.$route.query.skipUrl):"",r=this.$route.query.callbackType,i=this.$route.query.activityId,c=decodeURIComponent(this.$route.query.callback);if(r)switch(r){case"marketing":Object(n.a)(i,c)}else t?this.$router.replace({path:e,query:{backUrl:t}}):this.$router.replace({path:e})},checkMobileBind:function(){return c.a.mobileBindCheck({query:{userId:this.user.id}})}})}}}]);